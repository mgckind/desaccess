<link rel="import" href="../styles/shared-styles.html">
<dom-module id="des-toolbar">
<template>
   <style include="shared-styles">
       .info-container {
               position: relative;
               border: 2px solid #ccc;
               border-radius: 50%;
               height: 90px;
               padding: 2px;
               width: 90px;
               margin: 20px auto;
           }
           .info-container .image {
               background-image: url('/easyweb/static/images/user.png');
               background-size: contain;
               border-radius: 50%;
               height: 100%;
               width: 100%;
               background-repeat: no-repeat;
               background-position: center;
           }
           .self-info {
               margin: 0 20px;
               padding-bottom: 20px;
               border-bottom: 1px solid #CCC;
               text-align: center;
           }
           .self-info .name {
               font-weight: bold;
           }
           .self-info .email {
               color: #999;
           }
        @media only screen and (min-width: 1000px) {
            .smallScreen {
                display: none;
            }
        }
       app-toolbar{
           height: 73px;
           margin-top: 7px;
       }
       des-login-update,des-login-update-info{
           margin: 0;
           display: block;
            background-color: white;
            padding: 10px;
           box-shadow: -1px 1px 150px 600px rgba(0,0,0,0.6);
           -webkit-box-shadow: 1px 1px 150px 600px rgba(0,0,0,0.6);
           -moz-box-shadow: -1px 1px 150px 600px rgba(0,0,0,0.6);
       }

   </style>

   <app-toolbar sticky id="mainToolbar" class="black">
        <paper-icon-button class="smallScreen" icon="menu" onclick="drawer.toggle()" drawer-toggle ></paper-icon-button>
       <a href="/easyweb/">
       <iron-image class = "wideScreen" style="width:60px; height:60px; margin-right:10px" sizing="cover" src="/easyweb/static/images/DESDM_logo.png"></iron-image>
       </a>
       <a href="/easyweb/" style="text-decoration: none; color: white">
      <div main-title class="wideScreen">DARK ENERGY SURVEY desaccess </div>
       </a>
       <a href="/easyweb/" style="text-decoration: none; color: white">
      <div main-title drawer-toggle class="smallScreen">DES desaccess</div>
       </a>



            <paper-menu-button id="profileMenu" no-overlap horizontal-offset="-100" no-animations close-on-activate style="margin-right: 0px; margin-left:auto;">
              <paper-icon-button icon="social:person" slot="dropdown-trigger" alt="menu" style="width:50px;height: 50px;"></paper-icon-button>
             <iron-icon style="margin-left:-15px;" icon="arrow-drop-down" slot="dropdown-trigger" alt="menu"></iron-icon>
              <paper-listbox slot="dropdown-content">
                <paper-item class="profileItem" on-tap="reset">Change Password</paper-item>
                <paper-item  class="profileItem" on-tap="profile">Update Profile</paper-item>
                <paper-item  class="profileItem" on-tap="logout">Log out</paper-item>
              </paper-listbox>
            </paper-menu-button>
    </app-toolbar>



  <paper-dialog class="dialog-position-narrow" id="updatePassDialog"   on-iron-overlay-opened="patchOverlay" >
    <des-login-update error="{{error}}" db="{{db}}" username={{username}}></des-login-update>
  </paper-dialog>

  <paper-dialog class="dialog-position-narrow" id="updateInfoDialog"   on-iron-overlay-opened="patchOverlay">
    <des-login-update-info  name={{name}} lastname={{lastname}} email={{email}} username={{username}} error="{{error}}" db="{{db}}"></des-login-update-info>
  </paper-dialog>
</template>

<script>
      Polymer({
      is: "des-toolbar",
      properties:{
          db:{
              type: String,
              value: '',
          },
          name:{
              type: String,
              value: '',
          },
          lastname:{
              type: String,
              value: '',
          },
          username:{
              type: String,
              value: '',
          },
          email:{
              type: String,
              value: '',
          },
      },
      logout: function(event){
        window.open('/easyweb/logout/','_self',false);
      },
      _openmenu: function(event) {
          var dmenu = document.getElementById("profileMenu");
          if (dmenu.opened) {
              dmenu.close();
              dmenu.opened = false;
          }
          else {
              dmenu.open();
              dmenu.opened = true;
          }
      },
      home: function(event){
        window.open('/easyweb/','_self',false);
      },
      reset: function(event){
          document.getElementById("profileMenu").close();
          document.getElementById('updatePassDialog').open();
      },
      profile: function(event){
          document.getElementById("profileMenu").close();
          document.getElementById('updateInfoDialog').open();
      },
     patchOverlay: function (e) {
         if (e.target.withBackdrop) {
            e.target.parentNode.insertBefore(e.target.backdropElement, e.target);
         }
     }

    });

</script>

</dom-module>
